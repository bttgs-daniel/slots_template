<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Orientation Debug Tool</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Arial, sans-serif;
            padding: 20px;
            background: #1a1a2e;
            color: white;
            margin: 0;
        }
        
        .info-card {
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 15px;
        }
        
        .label {
            font-weight: bold;
            color: #667eea;
            display: inline-block;
            width: 200px;
        }
        
        .value {
            color: #ffffff;
            font-family: monospace;
        }
        
        .portrait {
            background: #ff6b6b;
        }
        
        .landscape {
            background: #51cf66;
        }
        
        h1 {
            color: #667eea;
            font-size: 24px;
            margin-bottom: 20px;
        }
        
        .orientation-status {
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            font-size: 20px;
            margin-bottom: 20px;
            transition: all 0.3s ease;
        }
        
        button {
            background: #667eea;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            font-size: 16px;
            cursor: pointer;
            margin: 5px;
        }
        
        button:hover {
            background: #764ba2;
        }
        
        .log {
            background: rgba(0, 0, 0, 0.3);
            padding: 10px;
            border-radius: 5px;
            max-height: 200px;
            overflow-y: auto;
            font-family: monospace;
            font-size: 12px;
        }
    </style>
</head>
<body>
    <h1>🔄 Orientation Debug Tool</h1>
    
    <div id="orientation-status" class="orientation-status">
        Checking orientation...
    </div>
    
    <div class="info-card">
        <div><span class="label">Device Type:</span> <span class="value" id="device-type">-</span></div>
        <div><span class="label">User Agent:</span> <span class="value" id="user-agent">-</span></div>
        <div><span class="label">Max Touch Points:</span> <span class="value" id="touch-points">-</span></div>
    </div>
    
    <div class="info-card">
        <div><span class="label">Window Width:</span> <span class="value" id="window-width">-</span></div>
        <div><span class="label">Window Height:</span> <span class="value" id="window-height">-</span></div>
        <div><span class="label">Screen Width:</span> <span class="value" id="screen-width">-</span></div>
        <div><span class="label">Screen Height:</span> <span class="value" id="screen-height">-</span></div>
        <div><span class="label">Device Pixel Ratio:</span> <span class="value" id="pixel-ratio">-</span></div>
    </div>
    
    <div class="info-card">
        <div><span class="label">Orientation Type:</span> <span class="value" id="orientation-type">-</span></div>
        <div><span class="label">Orientation Angle:</span> <span class="value" id="orientation-angle">-</span></div>
        <div><span class="label">Window Orientation:</span> <span class="value" id="window-orientation">-</span></div>
        <div><span class="label">CSS Media Query:</span> <span class="value" id="css-orientation">-</span></div>
    </div>
    
    <div class="info-card">
        <h3>Test Actions:</h3>
        <button onclick="testOrientationLock()">Test Orientation Lock</button>
        <button onclick="requestFullscreen()">Request Fullscreen</button>
        <button onclick="clearLog()">Clear Log</button>
    </div>
    
    <div class="info-card">
        <h3>Event Log:</h3>
        <div id="log" class="log"></div>
    </div>
    
    <script>
        let logMessages = [];
        
        function log(message) {
            const timestamp = new Date().toLocaleTimeString();
            logMessages.push(`[${timestamp}] ${message}`);
            if (logMessages.length > 100) {
                logMessages.shift();
            }
            document.getElementById('log').innerHTML = logMessages.join('<br>');
            document.getElementById('log').scrollTop = document.getElementById('log').scrollHeight;
        }
        
        function clearLog() {
            logMessages = [];
            document.getElementById('log').innerHTML = '';
        }
        
        function detectDevice() {
            const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
            const hasTouch = navigator.maxTouchPoints && navigator.maxTouchPoints > 2;
            
            if (isMobile) {
                return 'Mobile Device';
            } else if (hasTouch) {
                return 'Touch-enabled Device';
            } else {
                return 'Desktop';
            }
        }
        
        function updateInfo() {
            // Device info
            document.getElementById('device-type').textContent = detectDevice();
            document.getElementById('user-agent').textContent = navigator.userAgent.substring(0, 50) + '...';
            document.getElementById('touch-points').textContent = navigator.maxTouchPoints || '0';
            
            // Screen dimensions
            document.getElementById('window-width').textContent = window.innerWidth + 'px';
            document.getElementById('window-height').textContent = window.innerHeight + 'px';
            document.getElementById('screen-width').textContent = screen.width + 'px';
            document.getElementById('screen-height').textContent = screen.height + 'px';
            document.getElementById('pixel-ratio').textContent = window.devicePixelRatio || '1';
            
            // Orientation info
            if (screen.orientation) {
                document.getElementById('orientation-type').textContent = screen.orientation.type;
                document.getElementById('orientation-angle').textContent = screen.orientation.angle + '°';
            } else {
                document.getElementById('orientation-type').textContent = 'Not supported';
                document.getElementById('orientation-angle').textContent = 'Not supported';
            }
            
            document.getElementById('window-orientation').textContent = 
                window.orientation !== undefined ? window.orientation + '°' : 'Not supported';
            
            // CSS Media Query check
            const isPortrait = window.matchMedia("(orientation: portrait)").matches;
            document.getElementById('css-orientation').textContent = isPortrait ? 'portrait' : 'landscape';
            
            // Update status
            const statusEl = document.getElementById('orientation-status');
            const isActuallyPortrait = window.innerHeight > window.innerWidth;
            
            if (isActuallyPortrait) {
                statusEl.textContent = '📱 PORTRAIT MODE - Please rotate device';
                statusEl.className = 'orientation-status portrait';
            } else {
                statusEl.textContent = '🖥️ LANDSCAPE MODE - Good to go!';
                statusEl.className = 'orientation-status landscape';
            }
        }
        
        function testOrientationLock() {
            if (screen.orientation && screen.orientation.lock) {
                screen.orientation.lock('landscape').then(() => {
                    log('✅ Successfully locked to landscape');
                    alert('Orientation locked to landscape!');
                }).catch(err => {
                    log('❌ Failed to lock orientation: ' + err.message);
                    alert('Failed to lock orientation: ' + err.message);
                });
            } else {
                log('❌ Orientation lock API not supported');
                alert('Orientation lock API not supported on this device/browser');
            }
        }
        
        function requestFullscreen() {
            const elem = document.documentElement;
            if (elem.requestFullscreen) {
                elem.requestFullscreen().then(() => {
                    log('✅ Entered fullscreen');
                }).catch(err => {
                    log('❌ Fullscreen failed: ' + err.message);
                });
            } else if (elem.webkitRequestFullscreen) {
                elem.webkitRequestFullscreen();
            } else if (elem.mozRequestFullScreen) {
                elem.mozRequestFullScreen();
            } else if (elem.msRequestFullscreen) {
                elem.msRequestFullscreen();
            } else {
                log('❌ Fullscreen API not supported');
                alert('Fullscreen not supported');
            }
        }
        
        // Initial update
        updateInfo();
        log('Page loaded');
        
        // Update on resize
        window.addEventListener('resize', () => {
            updateInfo();
            log('Window resized');
        });
        
        // Update on orientation change
        window.addEventListener('orientationchange', () => {
            updateInfo();
            log('Orientation changed (legacy event)');
        });
        
        // Modern orientation API
        if (screen.orientation) {
            screen.orientation.addEventListener('change', () => {
                updateInfo();
                log('Orientation changed (modern API)');
            });
        }
        
        // Update every second as fallback
        setInterval(updateInfo, 1000);
        
        // Log visibility changes
        document.addEventListener('visibilitychange', () => {
            log('Visibility changed: ' + (document.hidden ? 'hidden' : 'visible'));
        });
        
        // Log touch events
        document.addEventListener('touchstart', () => {
            log('Touch detected');
        }, { once: true });
    </script>
</body>
</html>